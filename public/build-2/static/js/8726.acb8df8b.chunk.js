"use strict";(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[8726],{88726:(e,s,t)=>{t.r(s),t.d(s,{default:()=>X});var n=t(24980),a=t(66607),r=t(88094),i=t(83107),l=t(90844),o=t(15747),c=t(91073),d=t(19054),x=t(15678);const p=function(e){return(0,x.jsx)("div",{className:"flex flex-col flex-auto",children:(0,x.jsx)(l.sv,{})})};var m=t(78298),u=t(28290),h=t(76880),f=t(86785),g=t(98231),j=t(12214),A=t(22887),y=t(3339),k=t.n(y),w=t(41502),b=t(50804);const v=(0,j.zD)("tasksApp/tasks/getTasks",(async(e,s)=>{let{getState:t}=s;const n=await k().get("/api/tasks");return await n.data})),N=(0,j.zD)("tasksApp/tasks/reorder",(async(e,s)=>{let{startIndex:t,endIndex:n}=e,{dispatch:a,getState:r}=s;const i=await k().post("/api/tasks/reorder",{startIndex:t,endIndex:n}),l=await i.data;return a((0,w.rG)({message:"List Order Saved",autoHideDuration:2e3,anchorOrigin:{vertical:"top",horizontal:"right"}})),l})),S=(0,j.pU)({}),{selectAll:I,selectById:z}=S.getSelectors((e=>e.tasksApp.tasks)),D=(0,A.Mz)([I],(e=>e.filter((e=>"task"===e.type&&!e.completed)).length)),C=(0,j.Z0)({name:"tasksApp/tasks",initialState:S.getInitialState(),extraReducers:{[N.fulfilled]:S.setAll,[b.lC.fulfilled]:S.upsertOne,[b.XZ.fulfilled]:S.addOne,[b.u0.fulfilled]:(e,s)=>S.removeOne(e,s.payload),[v.fulfilled]:S.setAll}}),{setTasksSearchText:P}=C.actions,O=C.reducer;const L=function(e){const s=(0,i.d4)(D);return(0,x.jsxs)("div",{className:"flex flex-col sm:flex-row item-center sm:items-start space-y-16 sm:space-y-0 p-24 sm:p-32 w-full border-b-1 flex items-center justify-between",children:[(0,x.jsxs)("div",{className:"flex flex-col sm:flex-row items-center sm:space-x-12",children:[(0,x.jsx)(m.A,{component:u.P.span,initial:{x:-20},animate:{x:0,transition:{delay:.2}},delay:300,className:"text-24 md:text-32 font-extrabold tracking-tight leading-none",children:"Tasks"}),(0,x.jsx)(m.A,{component:u.P.span,initial:{y:-20,opacity:0},animate:{y:0,opacity:1,transition:{delay:.2}},delay:500,className:"text-14 font-medium ml-2",color:"text.secondary",children:`${s} remaining tasks`})]}),(0,x.jsxs)("div",{className:"flex items-center -mx-8",children:[(0,x.jsxs)(h.A,{className:"mx-8 whitespace-nowrap",component:f.A,to:"new/section",children:[(0,x.jsx)(g.A,{size:20,children:"heroicons-outline:plus"}),(0,x.jsx)("span",{className:"mx-8",children:"Add Section"})]}),(0,x.jsxs)(h.A,{className:"mx-8 whitespace-nowrap",variant:"contained",color:"secondary",component:f.A,to:"new/task",children:[(0,x.jsx)(g.A,{size:20,children:"heroicons-outline:plus"}),(0,x.jsx)("span",{className:"mx-8",children:"Add Task"})]})]})]})};var T=t(73678),R=t(69819),F=t(93209),H=t(99435),_=t(46521),$=t(60979),B=t(62189),E=t(15719),Y=t(96915);const Z=function(e){const{data:s,index:t}=e,n=(0,i.wA)();return(0,x.jsx)(R.sx,{draggableId:s.id,index:t,type:"list",children:(e,t)=>(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(F.Ay,{className:(0,Y.A)(t.isDragging?"shadow-lg":"shadow","px-40 py-12 group"),sx:{bgcolor:"background.paper"},button:!0,component:f.A,to:`/apps/tasks/${s.id}`,ref:e.innerRef,...e.draggableProps,children:[(0,x.jsx)("div",{className:"md:hidden absolute flex items-center justify-center inset-y-0 left-0 w-32 cursor-move md:group-hover:flex",...e.dragHandleProps,children:(0,x.jsx)(g.A,{sx:{color:"text.disabled"},size:20,children:"heroicons-solid:menu"})}),(0,x.jsx)($.A,{className:"min-w-40 -ml-10 mr-8",children:(0,x.jsx)(B.A,{sx:{color:s.completed?"secondary.main":"text.disabled"},onClick:e=>{e.preventDefault(),e.stopPropagation(),n((0,b.lC)({...s,completed:!s.completed}))},children:(0,x.jsx)(g.A,{children:"heroicons-outline:check-circle"})})}),(0,x.jsx)(H.A,{classes:{root:"m-0",primary:"truncate"},primary:s.title}),(0,x.jsxs)("div",{className:"flex items-center",children:[(0,x.jsxs)("div",{children:[0===s.priority&&(0,x.jsx)(g.A,{className:"text-green icon-size-16 mx-12",children:"heroicons-outline:arrow-narrow-down"}),2===s.priority&&(0,x.jsx)(g.A,{className:"text-red icon-size-16 mx-12",children:"heroicons-outline:arrow-narrow-up"})]}),s.dueDate&&(0,x.jsx)(m.A,{className:"text-12 whitespace-nowrap",color:"text.secondary",children:(0,E.A)(new Date(s.dueDate),"LLL dd")})]})]}),(0,x.jsx)(_.A,{})]})})};const G=function(e){const{data:s,index:t}=e;return(0,x.jsx)(R.sx,{draggableId:s.id,index:t,type:"list",children:(e,t)=>(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)(F.Ay,{className:"px-40 py-12 group",sx:{bgcolor:"background.default"},button:!0,component:f.A,to:`/apps/tasks/${s.id}`,ref:e.innerRef,...e.draggableProps,children:[(0,x.jsx)("div",{className:"md:hidden absolute flex items-center justify-center inset-y-0 left-0 w-32 cursor-move md:group-hover:flex",...e.dragHandleProps,children:(0,x.jsx)(g.A,{sx:{color:"text.disabled"},size:20,children:"heroicons-solid:menu"})}),(0,x.jsx)(H.A,{classes:{root:"m-0",primary:"font-semibold text-16 truncate"},primary:s.title})]}),(0,x.jsx)(_.A,{})]})})};const J=function(e){const s=(0,i.wA)(),t=(0,i.d4)(I);return t?0===t.length?(0,x.jsx)("div",{className:"flex flex-1 items-center justify-center h-full",children:(0,x.jsx)(m.A,{color:"text.secondary",variant:"h5",children:"There are no tasks!"})}):(0,x.jsx)(T.A,{className:"w-full m-0 p-0",children:(0,x.jsx)(R.JY,{onDragEnd:function(e){e.destination&&e.destination.index!==e.source.index&&s(N({arr:t,startIndex:e.source.index,endIndex:e.destination.index}))},children:(0,x.jsx)(R.gL,{droppableId:"list",type:"list",direction:"vertical",children:e=>(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{ref:e.innerRef,children:t.map(((e,s)=>"task"===e.type?(0,x.jsx)(Z,{data:e,index:s},e.id):"section"===e.type?(0,x.jsx)(G,{index:s,data:e},e.id):null))}),e.placeholder]})})})}):null};var M=t(73422),Q=t(50890);const U=(0,M.HY)({tags:Q.Ay,tasks:O,task:b.Ay}),W=(0,c.Ay)(n.A)((e=>{let{theme:s}=e;return{"& .FusePageSimple-header":{backgroundColor:s.palette.background.paper}}}));const X=(0,a.A)("tasksApp",U)((function(e){const s=(0,i.wA)(),t=(0,r.useRef)(null),n=(0,l.g)(),[a,c]=(0,r.useState)(!1),m=(0,d.A)((e=>e.breakpoints.down("lg")));return(0,o.Ij)((()=>{s(v()),s((0,Q.Q2)())}),[s]),(0,r.useEffect)((()=>{c(Boolean(n.id))}),[n]),(0,x.jsx)(W,{header:(0,x.jsx)(L,{pageLayout:t}),content:(0,x.jsx)(J,{}),ref:t,rightSidebarContent:(0,x.jsx)(p,{}),rightSidebarOpen:a,rightSidebarOnClose:()=>c(!1),rightSidebarWidth:640,scroll:m?"normal":"content"})}))}}]);